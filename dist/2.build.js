/*!
 * This file is created by longjw 
 *  email : hilongjw@gmail.com 
 *  updated_at : Fri Jan 08 2016 13:51:41 GMT+0800 (中国标准时间)
 */
webpackJsonp([2],[,,,,,,,function(t,e,o){var n=o(94)("wks"),r=o(99),i=o(12).Symbol;t.exports=function(t){return n[t]||(n[t]=i&&i[t]||(i||r)("Symbol."+t))}},,function(t,e){t.exports={}},,,,function(t,e,o){var n=o(6),r=o(28);t.exports=o(86)?function(t,e,o){return n.setDesc(t,e,r(1,o))}:function(t,e,o){return t[e]=o,t}},,,,,,,,,,function(t,e){var o={}.toString;t.exports=function(t){return o.call(t).slice(8,-1)}},,,function(t,e){var o={}.hasOwnProperty;t.exports=function(t,e){return o.call(t,e)}},function(t,e,o){"use strict";var n=o(91),r=o(24),i=o(93),s=o(13),a=o(26),c=o(9),l=o(89),u=o(29),d=o(6).getProto,m=o(7)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",h="values",g=function(){return this};t.exports=function(t,e,o,b,x,_,y){l(o,e,b);var w,j,k=function(t){if(!f&&t in C)return C[t];switch(t){case v:return function(){return new o(this,t)};case h:return function(){return new o(this,t)}}return function(){return new o(this,t)}},T=e+" Iterator",A=x==h,M=!1,C=t.prototype,S=C[m]||C[p]||x&&C[x],O=S||k(x);if(S){var $=d(O.call(new t));u($,T,!0),!n&&a(C,p)&&s($,m,g),A&&S.name!==h&&(M=!0,O=function(){return S.call(this)})}if(n&&!y||!f&&!M&&C[m]||s(C,m,O),c[e]=O,c[T]=g,x)if(w={values:A?O:k(h),keys:_?O:k(v),entries:A?k("entries"):O},y)for(j in w)j in C||i(C,j,w[j]);else r(r.P+r.F*(f||M),e,w);return w}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,o){var n=o(6).setDesc,r=o(26),i=o(7)("toStringTag");t.exports=function(t,e,o){t&&!r(t=o?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(74),i=n(r),s=o(8),a=(n(s),o(4)),c=n(a),l=c["default"].state.Cloud,u=l.Object.extend("Post"),d=l.Object.extend("Comment");e["default"]={data:function(){return{state:{favorite:!1,commentTmp:""},post:{comment:[]}}},ready:function(){console.log(componentHandler),componentHandler.upgradeAllRegistered()},asyncData:function(t,e){var o=this;this.loadPost(0,function(e){t({post:e}),o.$nextTick(function(){componentHandler.upgradeAllRegistered()})})},methods:{showModal:function(t,e){c["default"].actions.showModal(t,e),this.$nextTick(function(){componentHandler.upgradeAllRegistered()})},loadPost:function(t,e){var o=this,n=new l.Query(u),r=null;n.include("author"),n.get(this.$route.params.id,{success:function(t){var n=t;r={id:n.id,title:n.get("title"),frontcover:n.get("frontcover"),text:n.get("text"),author:n.get("author").getUsername(),time:n.updatedAt,favorite:n.get("favorite"),comment:[]},e(r),o.loadComment()},error:function(t,e){o.showModal("提示","加载失败，我也不知道怎么回事")}})},loadComment:function(){var t=this,e=[],o=new l.Query(d),n=new u;n.id=this.$route.params.id,o.include("author"),o.equalTo("post",n),o.find({success:function(o){var n=!0,r=!1,s=void 0;try{for(var a,c=(0,i["default"])(o);!(n=(a=c.next()).done);n=!0){var l=a.value;e.push({avatar:l.get("author").get("avatar"),name:l.get("author").getUsername(),time:l.updatedAt,text:l.get("text")})}}catch(u){r=!0,s=u}finally{try{!n&&c["return"]&&c["return"]()}finally{if(r)throw s}}t.post.comment=e}})},tapFavorite:function(){var t=this,e=new l.Query(u);e.get(this.$route.params.id,{success:function(e){t.state.favorite?(t.state.favorite=!1,t.post.favorite--,e.increment("favorite",-1)):(t.state.favorite=!0,t.post.favorite++,e.increment("favorite",1)),e.save()},error:function(e,o){t.showModal("提示","点赞失败，我也不知道怎么回事")}})},addComment:function(){var t=this,e=(new l.Query(u),new u),o=new d,n=c["default"].state.Cloud.User.current();return n?(e.id=this.$route.params.id,o.set("post",e),void o.save({author:n,time:new Date,text:t.state.commentTmp},{success:function(e){t.loadComment()},error:function(e,o){t.showModal("提示","加载失败，"+o.message)}})):(t.showModal("提示","你还没登录呢，登录之后才能评论文章哦"),!1)},goNext:function(t){var e=this;"next"===t?this.$http.get("dist/posts.json").then(function(t){void 0!=t.data[e.post.id+1]&&(document.documentElement.scrollTop=document.body.scrollTop=0,e.post=t.data[e.post.id+1],e.$route.router.go(e.post.id+1))},function(t){}):this.$http.get("dist/posts.json").then(function(t){void 0!=t.data[e.post.id-1]&&(document.documentElement.scrollTop=document.body.scrollTop=0,e.post=t.data[e.post.id-1],e.$route.router.go(e.post.id+1))},function(t){})}},ready:function(){window.scrollTop=0}}},,,,,,,,,,function(t,e,o){t.exports={"default":o(78),__esModule:!0}},,,,function(t,e,o){o(105),o(104),t.exports=o(101)},,,,function(t,e){t.exports=function(){}},function(t,e,o){var n=o(88);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,o){var n=o(23),r=o(7)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,o,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(o=(e=Object(t))[r])?o:i?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},,function(t,e,o){t.exports=!o(25)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,o){var n=o(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,o){"use strict";var n=o(6),r=o(28),i=o(29),s={};o(13)(s,o(7)("iterator"),function(){return this}),t.exports=function(t,e,o){t.prototype=n.create(s,{next:r(1,o)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=!0},,function(t,e,o){t.exports=o(13)},function(t,e,o){var n=o(12),r="__core-js_shared__",i=n[r]||(n[r]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,o){var n=o(96),r=o(11);t.exports=function(t){return function(e,o){var i,s,a=String(r(e)),c=n(o),l=a.length;return 0>c||c>=l?t?"":void 0:(i=a.charCodeAt(c),55296>i||i>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):i:t?a.slice(c,c+2):(i-55296<<10)+(s-56320)+65536)}}},function(t,e){var o=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:o)(t)}},function(t,e,o){var n=o(87),r=o(11);t.exports=function(t){return n(r(t))}},,function(t,e){var o=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++o+n).toString(36))}},function(t,e,o){var n=o(84),r=o(7)("iterator"),i=o(9);t.exports=o(5).getIteratorMethod=function(t){return void 0!=t?t[r]||t["@@iterator"]||i[n(t)]:void 0}},function(t,e,o){var n=o(83),r=o(100);t.exports=o(5).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,o){"use strict";var n=o(82),r=o(90),i=o(9),s=o(97);t.exports=o(27)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,o=this._i++;return!t||o>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,o):"values"==e?r(0,t[o]):r(0,[o,t[o]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},,function(t,e,o){"use strict";var n=o(95)(!0);o(27)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,o=this._i;return o>=e.length?{value:void 0,done:!0}:(t=n(e,o),this._i+=t.length,{value:t,done:!1})})},function(t,e,o){o(102);var n=o(9);n.NodeList=n.HTMLCollection=n.Array},function(t,e,o){e=t.exports=o(2)(),e.push([t.id,".faed{color:#ff4081}.entry-content{border-radius:2px;padding:20px 56px;margin-bottom:80px;min-height:300px}",""])},,,,,,,,,,,function(t,e,o){var n=o(106);"string"==typeof n&&(n=[[t.id,n,""]]);o(3)(n,{});n.locals&&(t.exports=n.locals)},,,,,,,,,,,,,,,,,,,,function(t,e){t.exports='<div class="cov-blog cov-blog--blogpost mdl-layout mdl-js-layout has-drawer is-upgraded"><main class=mdl-layout__content><div class=demo-back><a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" v-link="\'/\'" title="go back" role=button><i class=material-icons role=presentation>arrow_back</i></a></div><div class="cov-blog__posts mdl-grid"><div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col"><div class="mdl-card__media mdl-color-text--grey-50"><h3>{{post.title}}</h3></div><div class="mdl-color-text--grey-700 mdl-card__supporting-text meta"><div class=minilogo></div><div><strong>{{post.author}}</strong> <span>{{post.time | timeago}}</span></div><div class=section-spacer></div><div class=meta__favorites v-tap=tapFavorite>{{post.favorite}} <i class=material-icons role=presentation :class="{\'faed\':state.favorite}">favorite</i> <span class=visuallyhidden>favorites</span></div><div><i class=material-icons role=presentation>bookmark</i> <span class=visuallyhidden>bookmark</span></div><div><i class=material-icons role=presentation>share</i> <span class=visuallyhidden>share</span></div></div><div class=entry-content>{{{post.text | marked}}}</div><div class="mdl-color-text--primary-contrast mdl-card__supporting-text comments"><div><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><textarea rows=1 class=mdl-textfield__input v-model=state.commentTmp></textarea><label for=comment class=mdl-textfield__label>Join the discussion</label></div><button v-tap=addComment class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class=material-icons role=presentation>check</i><span class=visuallyhidden>add comment</span></button></div><div class="comment mdl-color-text--grey-700" v-for="comment in post.comment"><header class=comment__header><img :src=comment.avatar class=comment__avatar><div class=comment__author><strong>{{comment.name}}</strong> <span>{{comment.time | timeago}}</span></div></header><div class=comment__text>{{comment.text}}</div><nav class=comment__actions><button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class=material-icons role=presentation>thumb_up</i><span class=visuallyhidden>like comment</span></button> <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class=material-icons role=presentation>thumb_down</i><span class=visuallyhidden>dislike comment</span></button> <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"><i class=material-icons role=presentation>share</i><span class=visuallyhidden>share comment</span></button></nav></div></div></div><nav class="demo-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col"><a v-tap=loadComment class=demo-nav__button><button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation><i class=material-icons>arrow_back</i></button> Newer</a><div class=section-spacer></div><a v-tap="goNext(\'last\')" class=demo-nav__button>Older <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role=presentation><i class=material-icons>arrow_forward</i></button></a></nav></div></main><div class=mdl-layout__obfuscator></div></div>'},,,,,,function(t,e,o){var n,r;o(117),n=o(64),r=o(137),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),r&&(("function"==typeof t.exports?t.exports.options:t.exports).template=r)}]);